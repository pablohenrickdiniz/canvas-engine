<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../bower_components/jasmine-core/lib/jasmine-core/jasmine.css"/>
    <script type="text/javascript" src="../bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="../bower_components/lodash/lodash.min.js"></script>
    <script type="text/javascript" src="../src/canvas-engine.js"></script>
    <script type="text/javascript" src="../bower_components/jasmine-core/lib/jasmine-core/jasmine.js"></script>
    <script type="text/javascript" src="../bower_components/jasmine-core/lib/jasmine-core/jasmine-html.js"></script>
    <script type="text/javascript" src="../bower_components/jasmine-core/lib/jasmine-core/boot.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){

            describe('Teste de container',function(){
                var engine = null;
                beforeEach(function(){
                    $('#container').empty();
                    engine = CE.createEngine({
                        container:'#container',
                        width:800,
                        height:800
                    });
                });

                it('testar tamanho do container é igual ao tamanho passado no construtor',function(){
                    engine.set({
                        width:800,
                        height:800
                    });
                    expect($('#container').width()).toEqual(800);
                    expect($('#container').height()).toEqual(800);
                });

                it('verificiar se tamanho pode ser mudado por set',function(){
                    engine.set({
                        width:500,
                        height:500
                    });
                    expect($('#container').width()).toEqual(500);
                    expect($('#container').height()).toEqual(500);
                });
            });
        });

        describe('Teste de camadas',function(){
            var engine = null;
            beforeEach(function(){
                $("#container").empty();
                engine = CE.createEngine({
                    container:'#container',
                    width:800,
                    height:800
                });
                for(var i =0; i <  10;i++){
                    engine.createLayer();
                }
            });


            it('testar se a quantidade de camadas está correta no objeto',function(){
                expect(engine.layers.length).toEqual(10);
            });

            it('testar se a quantidade de camadas está correta no DOM',function(){
                expect(engine.layers.length).toEqual($("#container").find('canvas').length);
            });

            afterEach(function() {
                engine.removeLayers();
            });
        });


        describe('Atributos via data estão sendo capturados',function(){
            var engine = null;
            beforeEach(function(){
                $('#container').empty();
            });


            it('comparar tamanhos do data com objeto',function(){
                $('#container').data('width',500);
                $('#container').data('height',500);
                engine = CE.createEngine({
                    container:'#container',
                    width:500,
                    height:500
                });
                expect(engine.width).toEqual(500);
                expect(engine.height).toEqual(500);
            });
        });
    </script>
    <title>Canvas Engine Test</title>
</head>
<body>
<div id="container">

</div>
</body>
</html>