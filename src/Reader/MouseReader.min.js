define(["jquery"],function(b){var a=function(d){var c=this;c.element=d;c.leftdown=[];c.rightdown=[];c.middledown=[];c.leftup=[];c.rightup=[];c.middleup=[];c.mousemove=[];c.left=false;c.middle=false;c.right=false;c.lastDown={left:{x:0,y:0},right:{x:0,y:0},middle:{x:0,y:0}};c.lastUp={left:{x:0,y:0},right:{x:0,y:0},middle:{x:0,y:0}};c.lastMove={x:0,y:0};c.lastWheel=0;c.mouseWheel=[];c.start()};a.prototype.start=function(){var c=this;b(c.element).mousemove(function(g){var h=g.target;var f=g.offsetX;var i=g.offsetY;c.lastMove={x:f,y:i};if(h===b(c.element)[0]){c.mousemove.forEach(function(j){j.apply(c,[g])})}});b(c.element).mousedown(function(f){if(f.target===b(c.element)[0]){var g={x:f.offsetX,y:f.offsetY};switch(f.which){case 1:c.left=true;c.lastDown.left=g;c.leftdown.forEach(function(h){h.apply(c,[f])});break;case 2:c.middle=true;c.lastDown.middle=g;c.middledown.forEach(function(h){h.apply(c,[f])});break;case 3:c.right=true;c.lastDown.right=g;c.rightdown.forEach(function(h){h.apply(c,[f])})}}});b(document).mouseup(function(f){if(f.target===b(c.element)[0]){var g={x:f.offsetX,y:f.offsetY};switch(f.which){case 1:c.left=false;c.lastUp.left=g;c.leftup.forEach(function(h){h.apply(c,[f])});break;case 2:c.middle=false;c.lastUp.middle=g;c.middleup.forEach(function(h){h.apply(c,[f])});break;case 3:c.right=false;c.lastUp.right=g;c.rightup.forEach(function(h){h.apply(c,[f])})}}});b(c.element).mouseout(function(f){c.left=false;c.right=false;c.middle=false});var e=function(f){f.preventDefault();c.lastWheel=f.detail?f.detail*(-120):f.wheelDelta;c.mouseWheel.forEach(function(g){g.apply(c,[f])})};var d=(/Firefox/i.test(navigator.userAgent))?"DOMMouseScroll":"mousewheel";if(b(c.element)[0].attachEvent){b(c.element)[0].attachEvent("on"+d,e)}else{if(b(c.element)[0].addEventListener){b(c.element)[0].addEventListener(d,e,false)}}};a.prototype.unbindEvents=function(){var c=this;b(c.element).unbind("mousemove");b(c.element).unbind("mousedown");b(c.element).unbind("mousewheel")};a.prototype.onmousewheel=function(d){var c=this;c.mouseWheel.push(d)};a.prototype.onmousedown=function(d,e){var c=this;switch(d){case 1:c.leftdown.push(e);break;case 2:c.middledown.push(e);break;case 3:c.rightdown.push(e)}};a.prototype.onmouseup=function(d,e){var c=this;switch(d){case 1:c.leftup.push(e);break;case 2:c.middleup.push(e);break;case 3:c.rightup.push(e)}};a.prototype.onmousemove=function(d){var c=this;c.mousemove.push(d)};a.LEFT=1;a.MIDDLE=2;a.RIGHT=3;return a});