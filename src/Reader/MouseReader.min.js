define(["AppObject","jquery","Validator"],function(a,d,c){var b=function(f){var e=this;e.leftdown=[];e.rightdown=[];e.middledown=[];e.leftup=[];e.rightup=[];e.middleup=[];e.mousemove=[];e.element=null;e.initialize();a.call(e);b.bindProperties.apply(e);e.set(f)};b.prototype=Object.create(a.prototype);b.prototype.constructor=b;b.bindProperties=function(){var e=this;e._beforeSet("element",function(f,g){g=c.validateElement(f,g);if(f!==g){d(f).unbind("mousemove");d(f).unbind("mousedown");d(f).unbind("mousewheel")}return g});e._onChange("element",function(g){e.initializeVars();d(g).mousemove(function(j){j.preventDefault();var k=j.target;var i=j.offsetX;var l=j.offsetY;e.lastMove={x:i,y:l};e.mousemove.forEach(function(m){m.apply(e,[j])})});d(g).mousedown(function(i){i.preventDefault();var j={x:i.offsetX,y:i.offsetY};switch(i.which){case 1:e.left=true;e.lastDown.left=j;e.leftdown.forEach(function(k){k.apply(e,[i])});break;case 2:e.middle=true;e.lastDown.middle=j;e.middledown.forEach(function(k){k.apply(e,[i])});break;case 3:e.right=true;e.lastDown.right=j;e.rightdown.forEach(function(k){k.apply(e,[i])})}});d(g).mouseout(function(i){e.left=false;e.right=false;e.middle=false});var h=function(i){i.preventDefault();e.lastWheel=i.detail?i.detail*(-120):i.wheelDelta;e.mouseWheel.forEach(function(j){j.apply(e,[i])})};var f=(/Firefox/i.test(navigator.userAgent))?"DOMMouseScroll":"mousewheel";if(d(g)[0].attachEvent){d(g)[0].attachEvent("on"+f,h)}else{if(d(e.element)[0].addEventListener){d(g)[0].addEventListener(f,h,false)}}})};b.prototype.initializeVars=function(){var e=this;e.left=false;e.middle=false;e.right=false;e.lastDown={left:{x:0,y:0},right:{x:0,y:0},middle:{x:0,y:0}};e.lastUp={left:{x:0,y:0},right:{x:0,y:0},middle:{x:0,y:0}};e.lastMove={x:0,y:0};e.lastWheel=0;e.mouseWheel=[]};b.prototype.initialize=function(){var e=this;e.initializeVars();d(document).mouseup(function(f){f.preventDefault();if(e.element!==null){var g={x:f.offsetX,y:f.offsetY};switch(f.which){case 1:e.left=false;e.lastUp.left=g;e.leftup.forEach(function(h){h.apply(e,[f])});break;case 2:e.middle=false;e.lastUp.middle=g;e.middleup.forEach(function(h){h.apply(e,[f])});break;case 3:e.right=false;e.lastUp.right=g;e.rightup.forEach(function(h){h.apply(e,[f])})}}})};b.prototype.onmousewheel=function(f){var e=this;e.mouseWheel.push(f)};b.prototype.onmousedown=function(f,g){var e=this;switch(f){case 1:e.leftdown.push(g);break;case 2:e.middledown.push(g);break;case 3:e.rightdown.push(g)}};b.prototype.onmouseup=function(f,g){var e=this;switch(f){case 1:e.leftup.push(g);break;case 2:e.middleup.push(g);break;case 3:e.rightup.push(g)}};b.prototype.onmousemove=function(f){var e=this;e.mousemove.push(f)};b.LEFT=1;b.MIDDLE=2;b.RIGHT=3;return b});