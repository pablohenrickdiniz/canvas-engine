define(["jquery"],function(a){var b=function(d){var c=this;c.element=d;c.deny=false;c.keySequence=[];c.allowedSequences=[];c.lastKeyDown=null;c.lastKeyUp=null;c.onSequenceCallbacks=[];c.initialize()};b.prototype.key=function(c){if(b.Keys[c]!==undefined){return b.Keys[c]}return null};b.prototype.onSequence=function(e,d){var c=this;c.onSequenceCallbacks.push({sequence:e,callback:d})};b.prototype.sequenceIs=function(g,c,e){var d=this;c=c===undefined?false:c;e=e===undefined?false:e;if(e&&g.length!==d.keySequence.length){return false}for(var f=0;f<g.length;f++){if(c){if(g[f]!==d.keySequence[f]){return false}}else{if(d.keySequence.indexOf(g[f])===-1){return false}}}return true};b.prototype.denyAll=function(){this.deny=true};b.prototype.allowAll=function(){this.deny=false};b.prototype.allow=function(){var c=this;var e=arguments.length;for(var d=0;d<e;d++){var f=arguments[d];if(!(f instanceof Array)){f=[f]}c.allowedSequences.push(f)}};b.prototype.initialize=function(){var c=this;a(document).ready(function(){console.log("key reader initialize...");a(c.element).attr("tabindex",1);a(c.element).click(function(){a(this).focus()});a(c.element).keydown(function(g){if(c.keySequence.indexOf(g.which)===-1){c.keySequence.push(g.which)}if(c.deny){var f=c.allowedSequences.length;var h=false;for(var d=0;d<f;d++){var j=c.allowedSequences[d];if(c.sequenceIs(j,false,true)){h=true}}if(!h){g.preventDefault()}}c.onSequenceCallbacks.forEach(function(e){if(c.sequenceIs(e.sequence)){e.callback()}})});a(c.element).keyup(function(f){var d=c.keySequence.indexOf(f.which);if(d!==-1){c.keySequence.splice(d,1)}})})};b.Keys={KEY_DOWN:40,KEY_UP:38,KEY_LEFT:37,KEY_RIGHT:39,KEY_END:35,KEY_BEGIN:36,KEY_BACK_TAB:8,KEY_TAB:9,KEY_SH_TAB:16,KEY_ENTER:13,KEY_ESC:27,KEY_SPACE:32,KEY_DEL:46,KEY_A:65,KEY_B:66,KEY_C:67,KEY_D:68,KEY_E:69,KEY_F:70,KEY_G:71,KEY_H:72,KEY_I:73,KEY_J:74,KEY_K:75,KEY_L:76,KEY_M:77,KEY_N:78,KEY_O:79,KEY_P:80,KEY_Q:81,KEY_R:82,KEY_S:83,KEY_T:84,KEY_U:85,KEY_V:86,KEY_W:87,KEY_X:88,KEY_Y:89,KEY_Z:90,KEY_PLUS:107,KEY_MINUS:109,KEY_PF1:112,KEY_PF2:113,KEY_PF3:114,KEY_PF4:115,KEY_PF5:116,KEY_PF6:117,KEY_PF7:118,KEY_PF8:119,KEY_CTRL:17,KEY_ALT_GR:18,KEY_SBL:221,KEY_SBR:220};return b});