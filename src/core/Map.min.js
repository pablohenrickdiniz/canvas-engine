define(["PropsParser"],function(b){var a=function(d){console.log("Initializing Map...");d=typeof d=="object"?d:{};var c=this;c.width=10;c.height=10;c.tile_w=32;c.tile_h=32;c.imageSets=[];c.parent=null;c.renderIntervals=[];c.set(d)};a.prototype.getAreaInterval=function(l){var k=this;var i=b.parseNumber(l.x,0);var h=b.parseNumber(l.y,0);var c=b.parseNumber(l.width,0);var j=b.parseNumber(l.height,0);var g=parseInt(Math.floor(h/k.tile_h));var f=parseInt(Math.floor(i/k.tile_w));var e=parseInt(Math.floor((h+j)/k.tile_h));var d=parseInt(Math.floor((i+c)/k.tile_w));return{si:g,sj:f,ei:e,ej:d}};a.prototype.setTile=function(e,d,f){var c=this;if(c.imageSets[e]==undefined){c.imageSets[e]=[]}if(c.imageSets[e][d]==undefined){c.imageSets[e][d]=[]}c.imageSets[e][d][f.layer]=f;return c};a.prototype.set=function(d){console.log("Map set...");var c=this;c.tile_w=b.parseNumber(d.tile_w,c.tile_w);c.tile_h=b.parseNumber(d.tile_h,c.tile_h);c.imageSets=b.parseArray(d.imageSets,c.imageSets);c.width=b.parseNumber(d.width,c.width);c.height=b.parseNumber(d.height,c.height);if(c.parent!=null){c.parent.applyToLayers({width:c.width*c.tile_w,height:c.height*c.tile_h})}return c};return a});