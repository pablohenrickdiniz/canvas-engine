define(["AppObject","Validator"],function(a,c){var b=function(e){console.log("Initializing Map...");var d=this;d.width=10;d.height=10;d.tile_w=32;d.tile_h=32;d.imageSets=[];d.parent=null;d.renderIntervals=[];b.bindProperties.apply(d);d.set(e)};b.prototype=new a();b.prototype.getAreaInterval=function(m){var l=this;var j=c.validateNumber(0,m.x);var i=c.validateNumber(0,m.y);var d=c.validateNumber(0,m.width);var k=c.validateNumber(0,m.height);var h=parseInt(Math.floor(i/l.tile_h));var g=parseInt(Math.floor(j/l.tile_w));var f=parseInt(Math.floor((i+k)/l.tile_h));var e=parseInt(Math.floor((j+d)/l.tile_w));return{si:h,sj:g,ei:f,ej:e}};b.prototype.setTile=function(f,e,g){var d=this;if(d.imageSets[f]===undefined){d.imageSets[f]=[]}if(d.imageSets[f][e]===undefined){d.imageSets[f][e]=[]}d.imageSets[f][e][g.layer]=g;return d};b.bindProperties=function(){var d=this;d._beforeSet("tile_w",c.validateNumber);d._beforeSet("tile_h",c.validateNumber);d._beforeSet("width",c.validateNumber);d._beforeSet("height",c.validateNumber);d._beforeSet("imageSets",c.validateArray);d._afterChange(function(){if(d.parent!==null&&(d._isChanged("tile_w")||d._isChanged("tile_h")||d._isChanged("width")||d._isChanged("height"))){d.parent.applyToLayers({width:d.width*d.tile_w,height:d.height*d.tile_h})}})};return b});