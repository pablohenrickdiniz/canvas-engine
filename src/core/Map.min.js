define(["AppObject"],function(a){var b=function(d){console.log("Initializing Map...");var c=this;c.width=10;c.height=10;c.tile_w=32;c.tile_h=32;c.imageSets=[];c.parent=null;c.renderIntervals=[];b.bindProperties.apply(c);c.set(d)};b.prototype=new a();b.prototype.getAreaInterval=function(l){var k=this;var i=a.isNumber(l.x,0);var h=a.isNumber(l.y,0);var c=a.isNumber(l.width,0);var j=a.isNumber(l.height,0);var g=parseInt(Math.floor(h/k.tile_h));var f=parseInt(Math.floor(i/k.tile_w));var e=parseInt(Math.floor((h+j)/k.tile_h));var d=parseInt(Math.floor((i+c)/k.tile_w));return{si:g,sj:f,ei:e,ej:d}};b.prototype.setTile=function(e,d,f){var c=this;if(c.imageSets[e]===undefined){c.imageSets[e]=[]}if(c.imageSets[e][d]===undefined){c.imageSets[e][d]=[]}c.imageSets[e][d][f.layer]=f;return c};b.bindProperties=function(){var c=this;c._beforeSet("tile_w",a.isNumber);c._beforeSet("tile_h",a.isNumber);c._beforeSet("width",a.isNumber);c._beforeSet("height",a.isNumber);c._beforeSet("imageSets",a.isArray);c._afterChange(function(){if(c.parent!==null&&(c._isChanged("tile_w")||c._isChanged("tile_h")||c._isChanged("width")||c._isChanged("height"))){c.parent.applyToLayers({width:c.width*c.tile_w,height:c.height*c.tile_h})}})};return b});