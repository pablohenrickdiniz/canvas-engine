define(["lodash"],function(b){var a=function(){var c=this;c._changeCallbacks=[];c._beforeSetCallbacks=[];c._changed=[];c._afterChange=null};a.prototype.set=function(d){var c=this;if(d instanceof Object){Object.keys(c).forEach(function(f){if(d[f]!=undefined){var g=d[f];var e=c[f];if(!b.isEqual(e,g)){if(c._beforeSetCallbacks[f]!=undefined){g=c._beforeSetCallbacks[f](e,g)}if(!b.isEqual(e,g)){c[f]=g;c._changed[f]=true;if(c._changeCallbacks[f]!=undefined){c._changeCallbacks[f](g)}}}}});if(c._afterChange!=null&&Object.keys(c._changed).length>0){c._afterChange()}c._changed=[]}return c};a.prototype._afterChange=function(c){this._afterChange=c};a.prototype._isChanged=function(d){var c=this;return c._changed[d]!=undefined};a.prototype.beforeSet=function(d,e){var c=this;if(c[d]!=undefined||c[d]==null){c._beforeSetCallbacks[d]=e}return c};a.prototype.onChange=function(d,e){var c=this;if(c[d]!=undefined||c[d]==null){c._changeCallbacks[d]=e}return c};a.prototype.unbindChange=function(d){var c=this;if(c._changeCallbacks[d]!=undefined){delete c._changeCallbacks[d]}};a.isInt=function(c,d){if(a.regex.INT.test(d)){return d}return c};a.isNumber=function(c,d){if(b.isNumber(d)){return d}return c};a.isColor=function(c,d){var e=a.regex;if(e.HEXADECIMAL_COLOR.test(d)||e.RGB_COLOR.test(d)||e.RGBA_COLOR.test(d)){return d}return c};a.isString=function(c,d){if(b.isString(d)){return d}return c};a.isArray=function(c,d){if(b.isArray(d)){return d}return c};a.isBoolean=function(c,d){if(b.isBoolean(d)){return d}return c};a.prototype.props=function(){return Object.keys(this)};a.regex={INT:/^[0-9]+$/,HEXADECIMAL_COLOR:/^#[0-9A-Fa-f]{3}([0-9A-Fa-f]{3})?$/,RGB_COLOR:/^rgb\((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2}),(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2}),(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\)$/,RGBA_COLOR:/^rgba\((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2}),(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2}),(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2}),(0.[0-9]{1,2}|1)\)$/};return a});