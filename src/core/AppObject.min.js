define(["lodash"],function(b){var a=function(){var c=this;c._changeCallbacks=[];c._beforeSetCallbacks=[]};a.prototype.set=function(d){var c=this;if(d instanceof Object){Object.keys(c).forEach(function(f){if(d[f]!=undefined){var g=d[f];var e=c[f];if(!b.isEqual(e,g)){if(c._beforeSetCallbacks[f]!=undefined){g=c._beforeSetCallbacks[f](e,g)}c[f]=g;if(c._changeCallbacks[f]!=undefined){c._changeCallbacks[f](g)}}}})}return c};a.prototype.beforeSet=function(d,e){var c=this;if(c[d]!=undefined||c[d]==null){c._beforeSetCallbacks[d]=e}return c};a.prototype.onChange=function(d,e){var c=this;if(c[d]!=undefined||c[d]==null){c._changeCallbacks[d]=e}return c};a.prototype.unbindChange=function(d){var c=this;if(c._changeCallbacks[d]!=undefined){delete c._changeCallbacks[d]}};return a});