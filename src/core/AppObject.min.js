define(["lodash","Color"],function(b,c){var a=function(){var d=this;d._changeCallbacks=[];d._beforeSetCallbacks=[];d._changed=[];d._afterChange=null};a.prototype.set=function(e){var d=this;if(e instanceof Object){Object.keys(d).forEach(function(g){if(e[g]!=undefined){var h=e[g];var f=d[g];if(!b.isEqual(f,h)){if(d._beforeSetCallbacks[g]!=undefined){h=d._beforeSetCallbacks[g](f,h)}if(!b.isEqual(f,h)){d[g]=h;d._changed[g]=true;if(d._changeCallbacks[g]!=undefined){d._changeCallbacks[g](h)}}}}});if(d._afterChange!=null&&Object.keys(d._changed).length>0){d._afterChange()}d._changed=[]}return d};a.prototype._afterChange=function(d){this._afterChange=d};a.prototype._isChanged=function(e){var d=this;return d._changed[e]!=undefined};a.prototype.beforeSet=function(e,f){var d=this;if(d[e]!=undefined||d[e]==null){d._beforeSetCallbacks[e]=f}return d};a.prototype.onChange=function(e,f){var d=this;if(d[e]!=undefined||d[e]==null){d._changeCallbacks[e]=f}return d};a.prototype.unbindChange=function(e){var d=this;if(d._changeCallbacks[e]!=undefined){delete d._changeCallbacks[e]}};a.isInt=function(d,e){if((/^[0-9]+$/).test(e)){return e}return d};a.isNumber=function(d,e){if(b.isNumber(e)){return e}return d};a.isColor=function(d,e){if(c.isColor(e)){return e}return d};a.isString=function(d,e){if(b.isString(e)){return e}return d};a.isArray=function(d,e){if(b.isArray(e)){return e}return d};a.prototype.props=function(){return Object.keys(this)};return a});