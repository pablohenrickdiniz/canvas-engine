define(["PropsParser","ImageLoader","Filter"],function(d,c,b){var a=function(f){var e=this;e.loads=[];e.url="";e.x=0;e.y=0;e.oldX=0;e.oldY=0;e.width=0;e.height=0;e.sx=0;e.sy=0;e.sWidth=0;e.sHeight=0;e.layer=0;e.loaded=false;e.image=null;e.parent=null;e.selected=false;e.set(f)};a.prototype.clone=function(){return new a(this.toJSON())};a.prototype.getBounds=function(){var e=this;return{x:e.x,y:e.y,width:e.width,height:e.height}};a.prototype.set=function(f){var e=this;e.loads=[];e.x=d.parseNumber(f.x,e.x);e.y=d.parseNumber(f.y,e.y);e.width=d.parseNumber(f.width,e.width);e.height=d.parseNumber(f.height,e.height);e.sx=d.parseNumber(f.sx,e.sx);e.sy=d.parseNumber(f.sy,e.sy);e.sWidth=d.parseNumber(f.sWidth,e.width);e.sHeight=d.parseNumber(f.sHeight,e.height);e.layer=d.parseNumber(f.layer,e.layer);e.parent=f.parent==undefined?e.parent:f.parent;if(f.url!=undefined&&e.url!=f.url){e.url=f.url;e.loaded=false;e.image=new Image();e.image.src=e.url;c.load(e.url,function(g){e.loaded=true;e.image=g})}return e};a.prototype.toJSON=function(){var e=this;return{url:e.url,x:e.x,y:e.y,width:e.width,height:e.height,sx:e.sx,sy:e.sy,sWidth:e.sWidth,sHeight:e.sHeight,layer:e.layer}};a.prototype.isLoaded=function(){return this.loaded};a.prototype.isTransparent=function(e,j){var g=this;if(g.image!=null&&e<g.width&&j<g.height&&e>=0&&j>=0){var h=document.createElement("canvas");h.width=1;h.height=1;var f=h.getContext("2d");f.drawImage(g.image,g.sx+e,g.sy+j,1,1,0,0,1,1);var i=f.getImageData(0,0,1,1).data;return i[3]==undefined||i[3]==0}return true};return a});