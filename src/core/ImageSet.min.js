define(["AppObject","ImageLoader"],function(b,c){var a=function(e){var d=this;d.loads=[];d.url="";d.x=0;d.y=0;d.oldX=0;d.oldY=0;d.width=0;d.height=0;d.sx=0;d.sy=0;d.sWidth=0;d.sHeight=0;d.layer=0;d.loaded=false;d.image=null;d.parent=null;d.selected=false;a.bindProperties.apply(d);d.set(e)};a.prototype.clone=function(){return new a(this.toJSON())};a.prototype.getBounds=function(){var d=this;return{x:d.x,y:d.y,width:d.width,height:d.height}};a.bindProperties=function(){var d=this;d.beforeSet("x",b.isNumber);d.beforeSet("y",b.isNumber);d.beforeSet("width",b.isNumber);d.beforeSet("height",b.isNumber);d.beforeSet("sx",b.isNumber);d.beforeSet("sy",b.isNumber);d.beforeSet("sWidth",b.isNumber);d.beforeSet("sHeight",b.isNumber);d.beforeSet("layer",b.isNumber);d.beforeSet("url",b.isString);d.onChange("url",function(e){d.loaded=false;d.image=new Image();c.load(e,function(f){d.loaded=true;d.image=f})})};a.prototype.toJSON=function(){var d=this;return{url:d.url,x:d.x,y:d.y,width:d.width,height:d.height,sx:d.sx,sy:d.sy,sWidth:d.sWidth,sHeight:d.sHeight,layer:d.layer}};a.prototype.isLoaded=function(){return this.loaded};a.prototype.isTransparent=function(d,i){var f=this;if(f.image!=null&&d<f.width&&i<f.height&&d>=0&&i>=0){var g=document.createElement("canvas");g.width=1;g.height=1;var e=g.getContext("2d");e.drawImage(f.image,f.sx+d,f.sy+i,1,1,0,0,1,1);var h=e.getImageData(0,0,1,1).data;return h[3]==undefined||h[3]==0}return true};return a});