define(["CanvasLayer","Color"],function(a,c){var b=function(f,e){var d=this;a.call(d,f,e)};b.prototype=Object.create(a.prototype);b.prototype.constructor=b;b.prototype.drawGrid=function(f){var d=this;var e=d.getContext();f.rectSets.forEach(function(g){g.forEach(function(h){e.fillStyle=h.fillStyle;e.strokeStyle=h.strokeStyle;e.setLineDash(h.lineDash);e.lineWidth=h.lineWidth;e.fillRect(h.x,h.y,h.width,h.height);e.strokeRect(h.x,h.y,h.width,h.height)})});f.parent=this;return d};b.prototype.drawAbstractGrid=function(d){var o=this;if(d.isDrawable()){var g=o.getContext();g.fillStyle="transparent";g.strokeStyle=(new c({alpha:0.2})).toRGBA();g.lineWidth=1;g.lineDash=[];var h=o.getVisibleArea();var f=h.x!==0?Math.floor(h.x/d.sw):0;var e=h.y!==0?Math.floor(h.y/d.sh):0;var n=Math.ceil((h.x+h.width)/d.sw);var m=Math.ceil((h.y+h.height)/d.sh);for(var l=f;l<n;l++){for(var k=e;k<m;k++){g.strokeRect((l*d.sw)+d.x,(k*d.sh)+d.y,d.sw,d.sh)}}}return o};b.prototype.drawRectSet=function(e){var d=this;var f=d.getContext();f.fillStyle=e.fillStyle;f.strokeStyle=e.strokeStyle;f.fillRect(e.x,e.y,e.width,e.height);f.strokeRect(e.x,e.y,e.width,e.height);return d};return b});