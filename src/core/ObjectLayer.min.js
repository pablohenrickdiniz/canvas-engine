define(["CanvasLayer"],function(a){var b=function(e,d){var c=this;c.objects=[];e=e==undefined?{}:e;a.apply(c,[e,d])};b.prototype=new a;b.prototype.add=function(d){var c=this;d.parent=c;d.layer=c.objects.length;c.objects.push(d);c.refresh();return c};b.prototype.moveUp=function(f){var d=this;var e=d.objects.indexOf(f);if(e!=-1&&e<d.objects.length-1){var c=d.objects[e+1];c.layer=e;f.layer=e+1;d.objects[e]=c;d.objects[e+1]=f;d.refresh()}return d};b.prototype.moveDown=function(f){var d=this;var e=d.objects.indexOf(f);if(e!=-1&&e>0){var c=d.objects[e-1];c.layer=e;f.layer=e-1;d.objects[e]=c;d.objects[e-1]=f;d.refresh()}return d};b.prototype.remove=function(e){var c=this;var d=c.objects.indexOf(e);if(d!=-1){c.objects.splice(d,1);var g=c.objects.length;for(var f=d;f<g;f++){c.objects[d].layer=d}e.parent=null;c.refresh()}return c};b.prototype.unselectObjects=function(){var c=this;c.objects.forEach(function(d){d.selected=false});c.refresh()};b.prototype.refresh=function(){var c=this;c.clear().objects.forEach(function(d){c.drawImageSet(d)})};return b});